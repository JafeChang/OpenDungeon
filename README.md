# AI Dungeon Master

ä¸€ä¸ªé«˜åº¦å¯æ‰©å±•çš„ã€æ¨¡å—åŒ–çš„ Web æ¡Œé¢è§’è‰²æ‰®æ¼”æ¸¸æˆå¹³å°ï¼Œç”± AI åœ°ä¸‹åŸä¸»ä¸»æŒã€‚

## â­ æ ¸å¿ƒç‰¹æ€§

### ğŸ­ æ¸¸æˆç³»ç»Ÿ
- **AI åœ°ä¸‹åŸä¸»**ï¼šç”±å¤§è¯­è¨€æ¨¡å‹é©±åŠ¨çš„æ™ºèƒ½ DM
- **å¤šäººæ¸¸æˆ**ï¼šé€šè¿‡ Socket.io å®æ—¶å¤šäººå¯¹æˆ˜
- **ç§»åŠ¨ç«¯ä¼˜å…ˆ**ï¼šå“åº”å¼è®¾è®¡ï¼Œå®Œç¾æ”¯æŒæ‰‹æœºæµè§ˆå™¨
- **éª°å­ç³»ç»Ÿ**ï¼šå®Œæ•´çš„ D&D 5e éª°å­æŠ•æ·å™¨ï¼Œæ”¯æŒä¼˜åŠ¿/åŠ£åŠ¿
- **æ•°æ®æŒä¹…åŒ–**ï¼šSQLite æ•°æ®åº“ä¿å­˜æ¸¸æˆè¿›åº¦

### ğŸ”§ å¯æ‰©å±•æ€§ï¼ˆæ¨¡å—åŒ–æ¶æ„ï¼‰
- **ğŸ´ å¡ç‰‡ç³»ç»Ÿ**ï¼šç‰©å“å¡ã€æ³•æœ¯å¡ã€æ€ªç‰©å¡ã€äº‹ä»¶å¡
- **ğŸ° åœ°ä¸‹åŸç”Ÿæˆå™¨**ï¼šç¨‹åºåŒ–ç”Ÿæˆåœ°ä¸‹åŸå’Œå†’é™©åŒºåŸŸ
- **ğŸŒ å¤šè¯­è¨€æ”¯æŒ**ï¼šåŠ¨æ€è¯­è¨€åˆ‡æ¢ï¼Œè½»æ¾æ·»åŠ æ–°è¯­è¨€
- **ğŸ“œ è§„åˆ™é›†ç³»ç»Ÿ**ï¼šæ”¯æŒå¤šç§ TTRPG è§„åˆ™ï¼ˆD&D 5eã€Pathfinder 2e ç­‰ï¼‰
- **ğŸ§© æ¨¡ç»„ç³»ç»Ÿ**ï¼šå®Œæ•´çš„æ’ä»¶æ¶æ„ï¼Œç¤¾åŒºå¯åˆ›å»ºè‡ªå®šä¹‰å†…å®¹

### ğŸ¤– AI é›†æˆ
- **å¤š LLM æ”¯æŒ**ï¼šOpenAIã€DeepSeekã€Ollamaã€Claude ç­‰
- **å¯é…ç½®**ï¼šçµæ´»çš„ API é…ç½®å’Œæ¨¡å‹é€‰æ‹©
- **ç»“æ„åŒ–è¾“å‡º**ï¼šJSON æ ¼å¼çš„ DM å“åº”ï¼Œæ”¯æŒæ¸¸æˆçŠ¶æ€æ›´æ–°

## ğŸ“¦ æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ |
|------|------|
| å‰ç«¯ | React + Vite + Tailwind CSS |
| åç«¯ | Node.js + Express + Socket.io |
| æ•°æ®åº“ | SQLite |
| AI | OpenAI å…¼å®¹ API |
| å®¹å™¨åŒ– | Docker & Docker Compose |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨ Dockerï¼ˆæ¨èï¼‰

```bash
cd /srv/dev-disk-by-uuid-fb2bd74c-082c-435b-8613-f7e68862284e/projects/OpenDungeons
docker-compose up --build
```

è®¿é—®ï¼š
- **å‰ç«¯**ï¼šhttp://localhost:5173
- **åç«¯ API**ï¼šhttp://localhost:3001

### æœ¬åœ°å¼€å‘

#### åç«¯
```bash
cd backend
npm install
npm run dev
```

#### å‰ç«¯
```bash
cd frontend
npm install
npm run dev
```

## ğŸ® æ¸¸æˆæµç¨‹

1. **é…ç½® LLM**ï¼šåœ¨è®¾ç½®é¡µé¢é…ç½® AI æä¾›å•†
2. **åˆ›å»ºæˆ¿é—´**ï¼šè¾“å…¥è§’è‰²åç§°å’Œæˆ¿é—´åç§°
3. **å¼€å§‹å†’é™©**ï¼šè¾“å…¥è¡ŒåŠ¨ï¼ŒAI DM å“åº”å¹¶æ›´æ–°æ¸¸æˆçŠ¶æ€
4. **ä½¿ç”¨å¡ç‰‡**ï¼šæŸ¥çœ‹å’Œä½¿ç”¨ç‰©å“ã€æ³•æœ¯ç­‰å¡ç‰‡
5. **æ·éª°å­**ï¼šä½¿ç”¨å†…ç½®éª°å­æŠ•æ·å™¨è¿›è¡Œæ£€å®š
6. **å¤šäººæ¸¸æˆ**ï¼šåˆ†äº«æˆ¿é—´é“¾æ¥ï¼Œé‚€è¯·æœ‹å‹åŠ å…¥

## ğŸ§© æ¨¡ç»„ç³»ç»Ÿ

AI Dungeon Master é‡‡ç”¨å®Œå…¨æ¨¡å—åŒ–çš„æ¶æ„ï¼Œæ”¯æŒä»¥ä¸‹ç±»å‹çš„æ¨¡ç»„ï¼š

### æ¨¡ç»„ç±»å‹

| ç±»å‹ | æè¿° | ç¤ºä¾‹ |
|------|------|------|
| **datapack** | æ·»åŠ æ¸¸æˆæ•°æ® | æ€ªç‰©å›¾é‰´æ‰©å±•ã€æ–°ç‰©å“ |
| **i18n** | æ·»åŠ ç¿»è¯‘ | æ—¥è¯­è¯­è¨€åŒ…ã€å¾·è¯­ç¿»è¯‘ |
| **ruleset** | æ–°è§„åˆ™ç³»ç»Ÿ | Pathfinder 2eã€Starfinder |
| **custom** | è‡ªå®šä¹‰åŠŸèƒ½ | æˆ˜æ–—è¿½è¸ªå™¨ã€åœ°å›¾å·¥å…· |

### åˆ›å»ºæ¨¡ç»„

æŸ¥çœ‹ [MODDING.md](MODDING.md) äº†è§£å®Œæ•´çš„æ¨¡ç»„å¼€å‘æŒ‡å—ã€‚

```bash
# æ¨¡ç»„ç›®å½•ç»“æ„
backend/mods/
â”œâ”€â”€ core/           # æ ¸å¿ƒæ¨¡ç»„
â”‚   â”œâ”€â”€ dnd5e/      # D&D 5e æ•°æ®åŒ…
â”‚   â””â”€â”€ i18n/       # è¯­è¨€åŒ…
â””â”€â”€ custom/         # è‡ªå®šä¹‰æ¨¡ç»„
    â””â”€â”€ my-mod/     # ä½ çš„æ¨¡ç»„
```

## ğŸ´ å¡ç‰‡ç³»ç»Ÿ

### æ”¯æŒçš„å¡ç‰‡ç±»å‹

- **ç‰©å“å¡**ï¼šè£…å¤‡ã€æ¶ˆè€—å“ã€é­”æ³•ç‰©å“
- **æ³•æœ¯å¡**ï¼šå„ç­‰çº§æ³•æœ¯ï¼ŒæŒ‰å­¦æ´¾åˆ†ç±»
- **æ€ªç‰©å¡**ï¼šç”Ÿç‰©æ•°æ®ï¼ŒåŒ…å«å±æ€§å’ŒæŠ€èƒ½
- **äº‹ä»¶å¡**ï¼šéšæœºé­é‡å’Œæ•…äº‹äº‹ä»¶
- **ç‰¹æ€§å¡**ï¼šèŒä¸šç‰¹æ€§å’Œä¸“é•¿
- **æ¡ä»¶å¡**ï¼šçŠ¶æ€æ•ˆæœ

### å¡ç»„ç®¡ç†

```javascript
// åˆ›å»ºå¡ç»„å®ä¾‹
const deck = createDeckInstance('starter_equipment', 'player1');

// æŠ½å¡
const cards = drawCard(deck.instanceId, 3);

// æ‰“å‡ºå¡ç‰‡
playCard(deck.instanceId, cards[0].instanceId);
```

## ğŸ° åœ°ä¸‹åŸç”Ÿæˆå™¨

ç¨‹åºåŒ–ç”Ÿæˆåœ°ä¸‹åŸï¼ŒåŒ…å«ï¼š
- å¤šç§æˆ¿é—´ç±»å‹ï¼ˆæˆ˜æ–—ã€å®è—ã€è°œé¢˜ã€ä¼‘æ¯ã€ç‰¹æ®Šï¼‰
- æ™ºèƒ½æˆ¿é—´å¸ƒå±€ç®—æ³•
- è‡ªåŠ¨è¿æ¥èµ°å»Š
- æ ¹æ®ç­‰çº§ç”Ÿæˆæ€ªç‰©å’Œæˆ˜åˆ©å“

```javascript
// ç”Ÿæˆåœ°ä¸‹åŸ
const dungeon = generateDungeon({
  name: 'The Dark Depths',
  level: 5,
  floors: 3,
  roomsPerFloor: 15,
  theme: 'ancient_tomb'
});
```

## ğŸŒ å¤šè¯­è¨€æ”¯æŒ

æ”¯æŒçš„è¯­è¨€ï¼š
- ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡ï¼ˆé»˜è®¤ï¼‰
- ğŸ‡ºğŸ‡¸ English
- ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª
- ğŸ‡©ğŸ‡ª Deutschï¼ˆé€šè¿‡æ¨¡ç»„ï¼‰
- æ›´å¤šè¯­è¨€å¯é€šè¿‡è¯­è¨€åŒ…æ¨¡ç»„æ·»åŠ 

## ğŸ“œ è§„åˆ™é›†ç³»ç»Ÿ

### å†…ç½®è§„åˆ™é›†
- **D&D 5e**ï¼ˆé»˜è®¤ï¼‰ï¼šDungeons & Dragons ç¬¬ 5 ç‰ˆ
- **Pathfinder 2e**ï¼šé€šè¿‡æ¨¡ç»„æ”¯æŒ

### åˆ›å»ºè‡ªå®šä¹‰è§„åˆ™é›†

```json
{
  "name": "My Custom Rules",
  "abilities": ["STR", "DEX", "CON", "INT", "WIS", "CHA"],
  "getProficiencyBonus": "(level) => level + 2",
  "defaultCharacter": { ... }
}
```

## ğŸ“¡ API ç«¯ç‚¹

### æ¨¡ç»„ç®¡ç†
- `GET /api/mods` - è·å–æ‰€æœ‰æ¨¡ç»„
- `POST /api/mods/:id/enable` - å¯ç”¨æ¨¡ç»„
- `POST /api/mods/:id/disable` - ç¦ç”¨æ¨¡ç»„

### å¡ç‰‡ç³»ç»Ÿ
- `GET /api/cards/types` - è·å–å¡ç‰‡ç±»å‹
- `GET /api/cards/decks` - è·å–æ‰€æœ‰å¡ç»„
- `POST /api/cards/decks/:id/create` - åˆ›å»ºå¡ç»„å®ä¾‹
- `POST /api/cards/decks/:id/draw` - æŠ½å¡
- `GET /api/cards/search?type=items&q=sword` - æœç´¢å¡ç‰‡

### åœ°ä¸‹åŸç”Ÿæˆ
- `POST /api/dungeons/generate` - ç”Ÿæˆåœ°ä¸‹åŸ
- `GET /api/dungeons/themes` - è·å–åœ°ä¸‹åŸä¸»é¢˜
- `GET /api/dungeons/room-types` - è·å–æˆ¿é—´ç±»å‹

### å›½é™…åŒ–
- `GET /api/i18n/locales` - è·å–å¯ç”¨è¯­è¨€
- `POST /api/i18n/locale` - è®¾ç½®è¯­è¨€
- `GET /api/i18n/translations/:locale` - è·å–ç¿»è¯‘

### è§„åˆ™é›†
- `GET /api/rulesets` - è·å–æ‰€æœ‰è§„åˆ™é›†
- `POST /api/rulesets/set` - è®¾ç½®å½“å‰è§„åˆ™é›†

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```
AI-Dungeon-Master/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ ModLoader.js   # æ¨¡ç»„åŠ è½½å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ I18nManager.js # å›½é™…åŒ–ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ RuleEngine.js  # è§„åˆ™å¼•æ“
â”‚   â”‚   â”‚   â”œâ”€â”€ CardSystem.js  # å¡ç‰‡ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ DungeonGenerator.js # åœ°ä¸‹åŸç”Ÿæˆå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ DataManager.js # æ•°æ®ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ EventBus.js    # äº‹ä»¶æ€»çº¿
â”‚   â”‚   â”‚   â””â”€â”€ CommandRegistry.js # å‘½ä»¤ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ api/               # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ game/              # æ¸¸æˆé€»è¾‘
â”‚   â”‚   â”œâ”€â”€ config/            # é…ç½®
â”‚   â”‚   â””â”€â”€ server.js          # æœåŠ¡å™¨å…¥å£
â”‚   â”œâ”€â”€ mods/                  # æ¨¡ç»„ç›®å½•
â”‚   â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒæ¨¡ç»„
â”‚   â”‚   â””â”€â”€ custom/            # è‡ªå®šä¹‰æ¨¡ç»„
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Lobby.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ GameRoom.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Settings.jsx
â”‚   â”‚   â”‚   â””â”€â”€ ModManager.jsx
â”‚   â”‚   â”œâ”€â”€ components/        # UI ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.jsx
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ README.md
â””â”€â”€ MODDING.md                 # æ¨¡ç»„å¼€å‘æŒ‡å—
```

## ğŸ”§ é…ç½®

### LLM é…ç½®

åœ¨è®¾ç½®é¡µé¢æˆ–é€šè¿‡ API é…ç½®ï¼š

#### OpenAI
```
API URL: https://api.openai.com/v1
Model: gpt-4
API Key: sk-...
```

#### DeepSeek
```
API URL: https://api.deepseek.com/v1
Model: deepseek-chat
API Key: sk-...
```

#### Ollamaï¼ˆæœ¬åœ°ï¼‰
```
API URL: http://localhost:11434/v1
Model: llama2
API Key: ï¼ˆç•™ç©ºï¼‰
```

## ğŸ“š D&D 5e è§„åˆ™æ”¯æŒ

- âœ… å±æ€§æ£€å®šï¼ˆåŠ›é‡ã€æ•æ·ã€ä½“è´¨ã€æ™ºåŠ›ã€æ„ŸçŸ¥ã€é­…åŠ›ï¼‰
- âœ… æŠ€èƒ½æ£€å®šï¼ˆ18 ç§æŠ€èƒ½ï¼‰
- âœ… ä¼˜åŠ¿/åŠ£åŠ¿æœºåˆ¶
- âœ… æš´å‡»å’Œå¤§å¤±è´¥
- âœ… HP çŠ¶æ€è¿½è¸ª
- âœ… æ¡ä»¶æ•ˆæœç³»ç»Ÿ
- âœ… ç‰©å“æ ç®¡ç†
- âœ… æ³•æœ¯ç³»ç»Ÿ

## ğŸ¯ å¼€å‘è·¯çº¿

- [ ] AI ç©å®¶ä»£ç†ï¼ˆè‡ªåŠ¨è¡ŒåŠ¨çš„ NPCï¼‰
- [ ] å®Œæ•´çš„è§’è‰²å¡åˆ›å»ºå™¨
- [ ] æˆ˜æ–—ç³»ç»Ÿï¼ˆInitiative è¿½è¸ªï¼‰
- [ ] åœ°å›¾ç¼–è¾‘å™¨å’Œå¯è§†åŒ–
- [ ] æ›´å¤šå†…ç½®æ•°æ®åŒ…
- [ ] æˆ¿é—´åˆ—è¡¨æµè§ˆ
- [ ] å­˜æ¡£/è¯»æ¡£åŠŸèƒ½
- [ ] è¯­éŸ³èŠå¤©é›†æˆ

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºæ–°åŠŸèƒ½å»ºè®®ï¼

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

- Wizards of the Coast - D&D 5e SRD
- Paizo - Pathfinder è§„åˆ™
- æ‰€æœ‰è´¡çŒ®è€…å’Œæ¨¡ç»„ä½œè€…

---

**Generated with [Claude Code](https://claude.ai/code)**
**via [Happy](https://happy.engineering)**

Co-Authored-By: Claude <noreply@anthropic.com>
Co-Authored-By: Happy <yesreply@happy.engineering>
